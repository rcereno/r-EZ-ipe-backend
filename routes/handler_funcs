const Schemas = require("../models/Schemas.js");
const mongoose = require("mongoose");

const fetchRecipe = id => Schemas.Recipes
  .findById(id)
  .populate('name')
  .exec();


  const createRecipe = ({name, ingredients, steps}) => {

    const recipe = new Schemas.Recipes({
      name,
      ingredients,
      steps,
    });

    try{
        const saved = recipe.save();
        return saved;
    }catch (error) {
        console.log(error);
        return false;
      }
    
  }

  async function addRecipe({n, i, s}) {
    // userModel is a Model, a subclass of mongoose.Model
    const recipe = {
        name : n,
        ingredients: i,
        step: s
      };
    const userModel = mongoose.model("recipes", Schemas.Recipes, "recipes");
    try {
      const userToAdd = await new userModel(recipe);
      const savedUser = userToAdd.save();
      return savedUser;
    } catch (error) {
      console.log(error);
      return false;
    }
  }
  
  

  module.exports = {fetchRecipe, addRecipe, createRecipe};
